{# Conteúdo reutilizável do sidebar para desktop e offcanvas #}
{% if current_user.is_authenticated %}
<div class="d-flex align-items-center mb-4 ps-3">
  <i class="bi bi-person-circle fs-4 me-2"></i>
  <strong>{{ current_user.nome }}</strong>
</div>
{% endif %}

<ul class="nav flex-column">
  <!-- Almoxarifado -->
  <li class="nav-item">
    <a class="nav-link text-white fw-bold d-flex justify-content-between align-items-center"
       data-bs-toggle="collapse" href="#submenuAlmox" role="button"
       aria-expanded="{% if request.endpoint.startswith('almoxarifado.') %}true{% else %}false{% endif %}">
      <span><i class="bi bi-archive me-1"></i> Almoxarifado</span><i class="bi bi-chevron-down"></i>
    </a>
    <ul class="collapse nav flex-column ms-3 {% if request.endpoint.startswith('almoxarifado.') %}show{% endif %}" id="submenuAlmox">
      <li class="nav-item"><a href="{{ url_for('almoxarifado.listar_itens') }}" class="nav-link {% if request.endpoint == 'almoxarifado.listar_itens' %}active{% endif %} text-white">Itens</a></li>
      <li class="nav-item"><a href="{{ url_for('almoxarifado.index') }}" class="nav-link {% if request.endpoint == 'almoxarifado.index' %}active{% endif %} text-white">Fornecedores</a></li>
      <li class="nav-item"><a href="{{ url_for('almoxarifado.entrada.lista_entradas') }}" class="nav-link {% if request.endpoint == 'almoxarifado.entrada.lista_entradas' %}active{% endif %} text-white">Entrada de Materiais</a></li>
      <li class="nav-item"><a href="{{ url_for('almoxarifado.saida.lista_saidas') }}" class="nav-link {% if request.endpoint == 'almoxarifado.saida.lista_saidas' %}active{% endif %} text-white">Saída de Materiais</a></li>
      <li class="nav-item"><a href="{{ url_for('almoxarifado.index') }}" class="nav-link {% if request.endpoint == 'almoxarifado.index' %}active{% endif %} text-white">Relatórios</a></li>
    </ul>
  </li>

  <!-- Patrimônio -->
  <li class="nav-item mt-3">
    <a class="nav-link text-white fw-bold d-flex justify-content-between align-items-center"
       data-bs-toggle="collapse" href="#submenuPatrimonio" role="button"
       aria-expanded="{% if request.endpoint.startswith('patrimonio.') %}true{% else %}false{% endif %}">
      <span><i class="bi bi-building me-1"></i> Patrimônio</span><i class="bi bi-chevron-down"></i>
    </a>
    <ul class="collapse nav flex-column ms-3 {% if request.endpoint.startswith('patrimonio.') %}show{% endif %}" id="submenuPatrimonio">
      <li class="nav-item"><a href="{{ url_for('patrimonio.index') }}" class="nav-link {% if request.endpoint == 'patrimonio.index' %}active{% endif %} text-white">Bens Patrimoniais</a></li>
      <li class="nav-item"><a href="{{ url_for('patrimonio.index') }}" class="nav-link {% if request.endpoint == 'patrimonio.index' %}active{% endif %} text-white">Inventário</a></li>
      <li class="nav-item"><a href="{{ url_for('patrimonio.index') }}" class="nav-link {% if request.endpoint == 'patrimonio.index' %}active{% endif %} text-white">Transferência</a></li>
      <li class="nav-item"><a href="{{ url_for('patrimonio.index') }}" class="nav-link {% if request.endpoint == 'patrimonio.index' %}active{% endif %} text-white">Relatórios</a></li>
    </ul>
  </li>

  <!-- Compras -->
  <li class="nav-item mt-3">
    <a class="nav-link text-white fw-bold d-flex justify-content-between align-items-center"
       data-bs-toggle="collapse" href="#submenuCompras" role="button"
       aria-expanded="{% if request.endpoint.startswith('compras.') %}true{% else %}false{% endif %}">
      <span><i class="bi bi-cart-check me-1"></i> Compras</span><i class="bi bi-chevron-down"></i>
    </a>
    <ul class="collapse nav flex-column ms-3 {% if request.endpoint.startswith('compras.') %}show{% endif %}" id="submenuCompras">
      <li class="nav-item"><a href="{{ url_for('main.index') }}" class="nav-link {% if request.endpoint == 'main.index' %}active{% endif %} text-white">Painel de Contratações</a></li>
      <li class="nav-item"><a href="{{ url_for('main.index') }}" class="nav-link {% if request.endpoint == 'main.index' %}active{% endif %} text-white">Requisições</a></li>
      <li class="nav-item"><a href="{{ url_for('main.index') }}" class="nav-link {% if request.endpoint == 'main.index' %}active{% endif %} text-white">Fornecedores</a></li>
      <li class="nav-item"><a href="{{ url_for('main.index') }}" class="nav-link {% if request.endpoint == 'main.index' %}active{% endif %} text-white">Cotações</a></li>
      <li class="nav-item"><a href="{{ url_for('main.index') }}" class="nav-link {% if request.endpoint == 'main.index' %}active{% endif %} text-white">Processos SEI</a></li>
    </ul>
  </li>

  <!-- Publicações -->
  <li class="nav-item mt-3">
    <a href="{{ url_for('main.index') }}" class="nav-link text-white fw-bold">
      <i class="bi bi-journal-text me-1"></i> Publicações
    </a>
  </li>

  <!-- Dashboard -->
  <li class="nav-item mt-3">
    <a href="{{ url_for('main.index') }}" class="nav-link {% if request.endpoint == 'main.index' %}active{% endif %} text-white fw-bold">
      <i class="bi bi-graph-up-arrow me-1"></i> Dashboard
    </a>
  </li>

  <!-- Configurações -->
  <li class="nav-item mt-3">
    <a class="nav-link text-white fw-bold d-flex justify-content-between align-items-center"
       data-bs-toggle="collapse" href="#submenuConfig" role="button"
       aria-expanded="{% if request.endpoint.startswith('admin.') %}true{% else %}false{% endif %}">
      <span><i class="bi bi-gear me-1"></i> Configurações</span><i class="bi bi-chevron-down"></i>
    </a>
    <ul class="collapse nav flex-column ms-3 {% if request.endpoint.startswith('admin.') %}show{% endif %}" id="submenuConfig">
      <li class="nav-item"><a href="{{ url_for('admin.index') }}" class="nav-link {% if request.endpoint == 'admin.index' %}active{% endif %} text-white">Perfis e Usuários</a></li>
      <li class="nav-item mt-2 text-white-50 small">Organização Administrativa</li>
      <li class="nav-item"><a href="{{ url_for('admin.index') }}" class="nav-link {% if request.endpoint == 'admin.index' %}active{% endif %} text-white">Natureza de Despesa</a></li>
      <li class="nav-item"><a href="{{ url_for('admin.index') }}" class="nav-link {% if request.endpoint == 'admin.index' %}active{% endif %} text-white">Grupos</a></li>
      <li class="nav-item"><a href="{{ url_for('admin.index') }}" class="nav-link {% if request.endpoint == 'admin.index' %}active{% endif %} text-white">Áreas</a></li>
      <li class="nav-item"><a href="{{ url_for('admin.index') }}" class="nav-link {% if request.endpoint == 'admin.index' %}active{% endif %} text-white">Unidades Locais</a></li>
    </ul>
  </li>

  <!-- Auditoria (somente admin) -->
  {% if current_user.is_admin %}
  <li class="nav-item mt-3">
    <a href="{{ url_for('admin.index') }}" class="nav-link {% if request.endpoint == 'admin.index' %}active{% endif %} text-white fw-bold">
      <i class="bi bi-shield-lock me-1"></i> Auditoria
    </a>
  </li>
  {% endif %}
</ul>
